[package]
name = "void_runtime"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
description = "Metaverse OS Runtime - the persistent process that never dies"

[[bin]]
name = "metaverse"
path = "src/main.rs"

[dependencies]
# Internal crates
void_kernel = { path = "../void_kernel" }
void_ir = { path = "../void_ir" }
void_ecs = { path = "../void_ecs" }
void_shell = { path = "../void_shell" }
void_script = { path = "../void_script" }
void_services = { path = "../void_services" }
void_presenter = { path = "../void_presenter" }
void_shader = { path = "../void_shader" }
void_compositor = { path = "../void_compositor" }
void_render = { path = "../void_render" }
void_math = { path = "../void_math" }
void_asset = { path = "../void_asset" }
void_asset_server = { path = "../void_asset_server" }
void_xr = { path = "../void_xr", optional = true }
void_physics = { path = "../void_physics" }
void_triggers = { path = "../void_triggers" }

# Graphics and windowing
wgpu = { workspace = true }
winit = { workspace = true }
pollster = { workspace = true }
bytemuck = { workspace = true }
glyphon = "0.6"
image = "0.25"

# Utilities
parking_lot = { workspace = true }
log = { workspace = true }
env_logger = { workspace = true }
thiserror = { workspace = true }
serde = { workspace = true }
toml = "0.8"

# Async for input handling
crossbeam-channel = { workspace = true }

# Signal handling
ctrlc = "3.4"

# Async channels (for DRM buffer mapping)
async-channel = "2.0"
futures-lite = "2.0"

# Linux-specific dependencies
[target.'cfg(target_os = "linux")'.dependencies]
libc = "0.2"

[features]
default = []
drm-backend = ["void_presenter/drm-backend"]
# Smithay-based compositor (Linux only, replaces drm-backend)
# Enables full Wayland compositor with DRM, libinput, libseat
smithay = ["void_compositor/smithay-compositor"]
# XR/VR/AR support via OpenXR
xr = ["void_presenter/xr", "dep:void_xr"]
