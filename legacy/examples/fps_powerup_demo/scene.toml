# ============================================================================
# FPS POWER-UP DEMO - Void GUI v2 Scene
# ============================================================================
# A small FPS arena demonstrating:
#   - First-person player with plasma rifle
#   - Power Core pickup that grants POWER SURGE buff
#   - Normal shots: 20 damage, blue tracers
#   - Powered shots: 50 damage, gold tracers, penetration
#   - Target dummies to destroy
#   - Full HUD with health, ammo, power-up timer
# ============================================================================

[scene]
name = "FPS Power-Up Demo"
description = "Grab the Power Core for devastating plasma blasts!"
version = "1.0"

# ============================================================================
# PHYSICS CONFIGURATION
# ============================================================================

[physics]
gravity = [0, -9.81, 0]
fixed_timestep = 0.016666
solver_iterations = 4

# Collision layers
layers = ["default", "player", "enemies", "projectiles", "triggers", "terrain", "pickups"]

[physics.collision_matrix]
default = ["default", "terrain"]
player = ["default", "enemies", "terrain", "triggers", "pickups"]
enemies = ["default", "player", "projectiles", "terrain"]
projectiles = ["enemies", "terrain"]
triggers = ["player"]
terrain = ["default", "player", "enemies", "projectiles"]
pickups = ["player"]

# ============================================================================
# AUDIO CONFIGURATION
# ============================================================================

[audio]
master_volume = 1.0
music_volume = 0.5
sfx_volume = 1.0
ambient_volume = 0.6

[audio.music]
track = "music/combat_loop.ogg"
volume = 0.4
loop = true
fade_in = 2.0

[[audio.ambient.layers]]
clip = "sounds/ambient/industrial_hum.wav"
volume = 0.3
loop = true

[audio.mixer.channels]
master = { volume = 1.0 }
music = { volume = 0.5, parent = "master" }
sfx = { volume = 1.0, parent = "master" }
weapons = { volume = 1.0, parent = "sfx" }
ui = { volume = 0.8, parent = "sfx" }

# Audio snapshots for power-up
[audio.snapshots]
[audio.snapshots.normal]
music = 0.5
sfx = 1.0

[audio.snapshots.powered_up]
music = 0.7
sfx = 1.1
# Bass boost effect when powered

# ============================================================================
# GAME STATE VARIABLES
# ============================================================================

[state]
[state.variables]
score = { type = "int", default = 0, persistent = false }
enemies_destroyed = { type = "int", default = 0, persistent = false }
shots_fired = { type = "int", default = 0, persistent = false }
shots_hit = { type = "int", default = 0, persistent = false }
power_ups_collected = { type = "int", default = 0, persistent = false }

# Statistics
[state.statistics]
total_damage_dealt = { type = "float", default = 0.0, persistent = false }
highest_single_hit = { type = "int", default = 0, persistent = false }
accuracy_percent = { type = "float", default = 0.0, persistent = false }

# ============================================================================
# INPUT CONFIGURATION
# ============================================================================

[input]
[input.bindings]
move_forward = "W"
move_backward = "S"
move_left = "A"
move_right = "D"
jump = "Space"
sprint = "LShift"
crouch = "LCtrl"
attack = "Mouse1"
aim = "Mouse2"
reload = "R"
interact = "E"

[input.camera]
sensitivity = 2.0
invert_y = false
smoothing = 0.0

# ============================================================================
# UI / HUD CONFIGURATION
# ============================================================================

[ui]
[ui.hud]
enabled = true

# --- HEALTH PANEL (Top-Left) ---
[[ui.hud.elements]]
type = "panel"
id = "health_panel"
anchor = "top_left"
offset = [20, 20]
size = [220, 55]
background_color = [0.05, 0.05, 0.08, 0.85]
border_radius = 6

[[ui.hud.elements.children]]
type = "text"
id = "health_label"
offset = [12, 6]
font_size = 11
text = "HEALTH"
color = [0.6, 0.6, 0.6, 1]

[[ui.hud.elements.children]]
type = "progress_bar"
id = "health_bar"
offset = [12, 24]
size = [196, 22]
bind_to = "player.health.current"
bind_max = "player.health.max"
fill_color = [0.85, 0.15, 0.15, 1]
background_color = [0.2, 0.05, 0.05, 0.9]
border_color = [0.3, 0.1, 0.1, 1]
border_width = 1
show_text = true
text_format = "{value} / {max}"

# --- AMMO PANEL (Bottom-Right) ---
[[ui.hud.elements]]
type = "panel"
id = "ammo_panel"
anchor = "bottom_right"
offset = [-20, -20]
size = [160, 80]
background_color = [0.05, 0.05, 0.08, 0.85]
border_radius = 6

[[ui.hud.elements.children]]
type = "text"
id = "weapon_name"
offset = [12, 8]
font_size = 11
bind_to = "player.weapon.name"
color = [0.5, 0.75, 1, 1]

[[ui.hud.elements.children]]
type = "text"
id = "ammo_current"
offset = [12, 28]
font_size = 38
bind_to = "player.weapon.current_ammo"
color = [1, 1, 1, 1]

[[ui.hud.elements.children]]
type = "text"
id = "ammo_divider"
offset = [75, 42]
font_size = 18
text = "/"
color = [0.5, 0.5, 0.5, 1]

[[ui.hud.elements.children]]
type = "text"
id = "ammo_reserve"
offset = [90, 42]
font_size = 18
bind_to = "player.weapon.reserve_ammo"
color = [0.6, 0.6, 0.6, 1]

# --- CROSSHAIR (Center) ---
[[ui.hud.elements]]
type = "image"
id = "crosshair"
anchor = "center"
offset = [0, 0]
size = [24, 24]
image = "ui/crosshair_dot.png"
tint = [0.4, 0.85, 1, 0.9]

# --- POWER-UP INDICATOR (Top-Center) ---
[[ui.hud.elements]]
type = "panel"
id = "powerup_panel"
anchor = "top_center"
offset = [0, 20]
size = [280, 50]
background_color = [0.15, 0.1, 0.02, 0.95]
border_color = [1, 0.7, 0.2, 0.8]
border_width = 2
border_radius = 8
visible = false  # Shown when power-up active

[[ui.hud.elements.children]]
type = "text"
id = "powerup_title"
offset = [15, 6]
font_size = 14
text = "POWER SURGE ACTIVE"
color = [1, 0.85, 0.3, 1]

[[ui.hud.elements.children]]
type = "progress_bar"
id = "powerup_timer"
offset = [15, 28]
size = [250, 14]
bind_to = "player.power_surge_time"
bind_max = 15.0
fill_color = [1, 0.6, 0.1, 1]
background_color = [0.3, 0.15, 0, 0.8]
gradient = true
gradient_colors = [[1, 0.8, 0.2, 1], [1, 0.4, 0, 1]]

# --- SCORE (Top-Right) ---
[[ui.hud.elements]]
type = "panel"
id = "score_panel"
anchor = "top_right"
offset = [-20, 20]
size = [140, 65]
background_color = [0.05, 0.05, 0.08, 0.85]
border_radius = 6

[[ui.hud.elements.children]]
type = "text"
id = "score_label"
offset = [12, 6]
font_size = 11
text = "SCORE"
color = [0.6, 0.6, 0.6, 1]

[[ui.hud.elements.children]]
type = "text"
id = "score_value"
offset = [12, 22]
font_size = 28
bind_to = "state.score"
color = [1, 1, 1, 1]

[[ui.hud.elements.children]]
type = "text"
id = "kills_display"
offset = [12, 48]
font_size = 12
bind_to = "state.enemies_destroyed"
format = "Targets: {value}"
color = [0.7, 0.7, 0.7, 1]

# --- DAMAGE NUMBERS ---
[ui.damage_numbers]
enabled = true
font_size = 20
float_speed = 100
float_duration = 1.2
fade_start = 0.6
scale_by_damage = true
min_scale = 0.8
max_scale = 2.5
randomize_position = true
random_offset = 15

[ui.damage_numbers.colors]
energy = [0.4, 0.8, 1, 1]           # Normal shots - cyan
energy_powered = [1, 0.85, 0.2, 1]  # Powered shots - gold
critical = [1, 0.3, 0.3, 1]         # Critical hits - red

# --- INTERACTION PROMPTS ---
[ui.interaction]
enabled = true
position = "center"
offset = [0, 120]
font_size = 16
background = true
background_color = [0, 0, 0, 0.85]
padding = [16, 10]
border_radius = 4
show_keybind = true
keybind_style = "bracket"

# --- NOTIFICATIONS ---
[ui.notifications]
position = "top_center"
offset = [0, 90]
max_visible = 3
duration = 3.0
fade_duration = 0.5
width = 350
background_color = [0.1, 0.1, 0.12, 0.95]
border_radius = 6

[ui.notifications.types]
powerup = { icon = "ui/icons/lightning.png", color = [1, 0.8, 0.2, 1] }
kill = { icon = "ui/icons/skull.png", color = [1, 0.4, 0.4, 1] }
ammo = { icon = "ui/icons/ammo.png", color = [0.4, 0.7, 1, 1] }

# ============================================================================
# WEAPONS
# ============================================================================

# --- PLASMA RIFLE (Normal) ---
[[weapons]]
name = "Plasma Rifle"
id = "plasma_rifle"
type = "hitscan"

[weapons.hitscan]
damage = 20
damage_type = "energy"
range = 150.0
fire_rate = 8.0
spread = 1.2
headshot_multiplier = 2.0

[weapons.ammo]
magazine_size = 30
reserve_max = 180
reload_time = 1.8
auto_reload = true

[weapons.effects]
muzzle_flash = "effects/plasma_muzzle.toml"
hit_effect = "effects/plasma_hit.toml"
tracer = "effects/plasma_tracer_blue.toml"
sound_fire = "sounds/weapons/plasma_fire.wav"
sound_reload = "sounds/weapons/plasma_reload.wav"
sound_empty = "sounds/weapons/click.wav"

# --- PLASMA RIFLE (Powered Up) ---
[[weapons]]
name = "Plasma Rifle [SURGE]"
id = "plasma_rifle_powered"
type = "hitscan"

[weapons.hitscan]
damage = 50                          # 2.5x damage!
damage_type = "energy_powered"
range = 180.0                        # Extended range
fire_rate = 10.0                     # Faster fire rate
spread = 0.5                         # More accurate
headshot_multiplier = 3.0
penetration = 2                      # Pierce through 2 targets

[weapons.ammo]
magazine_size = 30
reserve_max = 180
reload_time = 1.2                    # Faster reload

[weapons.effects]
muzzle_flash = "effects/plasma_muzzle_gold.toml"
hit_effect = "effects/plasma_hit_gold.toml"
tracer = "effects/plasma_tracer_gold.toml"
sound_fire = "sounds/weapons/plasma_fire_powered.wav"
sound_reload = "sounds/weapons/plasma_reload.wav"

# ============================================================================
# STATUS EFFECTS
# ============================================================================

[status_effects.power_surge]
type = "buff"
damage_mult = 2.5
fire_rate_mult = 1.25
accuracy_mult = 2.0
duration = 15.0
effect = "effects/power_surge_aura.toml"
sound_start = "sounds/powerups/surge_activate.wav"
sound_loop = "sounds/powerups/surge_loop.wav"
sound_end = "sounds/powerups/surge_end.wav"

# When buff applied, swap to powered weapon
[status_effects.power_surge.on_apply]
swap_weapon = "plasma_rifle_powered"
show_ui = "powerup_panel"
play_sound = "sounds/powerups/surge_activate.wav"
screen_effect = "effects/power_surge_screen.toml"
notification = { type = "powerup", text = "POWER SURGE ACTIVATED!" }

[status_effects.power_surge.on_expire]
swap_weapon = "plasma_rifle"
hide_ui = "powerup_panel"
play_sound = "sounds/powerups/surge_end.wav"
notification = { type = "powerup", text = "Power Surge ended" }

# ============================================================================
# ENTITIES - ENVIRONMENT
# ============================================================================

# --- ARENA FLOOR ---
[[entities]]
name = "arena_floor"
mesh = "primitives/plane"

[entities.transform]
position = [0, 0, 0]
scale = [40, 1, 40]

[entities.material]
albedo = [0.12, 0.12, 0.15]
metallic = 0.4
roughness = 0.6
normal_map = "textures/floor_normal.png"
normal_scale = 0.5

[entities.physics]
body_type = "static"
layer = "terrain"

[entities.physics.collider]
shape = "box"
size = [80, 1, 80]
offset = [0, -0.5, 0]

# --- ARENA WALLS ---
[[entities]]
name = "wall_north"
mesh = "primitives/cube"

[entities.transform]
position = [0, 4, 35]
scale = [80, 8, 2]

[entities.material]
albedo = [0.18, 0.18, 0.22]
metallic = 0.5
roughness = 0.4

[entities.physics]
body_type = "static"
layer = "terrain"

[entities.physics.collider]
shape = "box"
size = [80, 8, 2]

[[entities]]
name = "wall_south"
mesh = "primitives/cube"

[entities.transform]
position = [0, 4, -35]
scale = [80, 8, 2]

[entities.material]
albedo = [0.18, 0.18, 0.22]
metallic = 0.5
roughness = 0.4

[entities.physics]
body_type = "static"
layer = "terrain"

[entities.physics.collider]
shape = "box"
size = [80, 8, 2]

[[entities]]
name = "wall_east"
mesh = "primitives/cube"

[entities.transform]
position = [35, 4, 0]
scale = [2, 8, 80]

[entities.material]
albedo = [0.18, 0.18, 0.22]
metallic = 0.5
roughness = 0.4

[entities.physics]
body_type = "static"
layer = "terrain"

[entities.physics.collider]
shape = "box"
size = [2, 8, 80]

[[entities]]
name = "wall_west"
mesh = "primitives/cube"

[entities.transform]
position = [-35, 4, 0]
scale = [2, 8, 80]

[entities.material]
albedo = [0.18, 0.18, 0.22]
metallic = 0.5
roughness = 0.4

[entities.physics]
body_type = "static"
layer = "terrain"

[entities.physics.collider]
shape = "box"
size = [2, 8, 80]

# --- COVER BLOCKS ---
[[entities]]
name = "cover_crate_1"
mesh = "props/crate_large.glb"

[entities.transform]
position = [12, 1.5, 12]
rotation = [0, 15, 0]
scale = 1.5

[entities.material]
albedo = [0.35, 0.28, 0.18]
metallic = 0.1
roughness = 0.85

[entities.physics]
body_type = "static"
layer = "terrain"

[entities.physics.collider]
shape = "box"
size = [3, 3, 3]

[[entities]]
name = "cover_crate_2"
mesh = "props/crate_large.glb"

[entities.transform]
position = [-12, 1.5, -12]
rotation = [0, -30, 0]
scale = 1.5

[entities.material]
albedo = [0.35, 0.28, 0.18]
metallic = 0.1
roughness = 0.85

[entities.physics]
body_type = "static"
layer = "terrain"

[entities.physics.collider]
shape = "box"
size = [3, 3, 3]

[[entities]]
name = "cover_pillar_1"
mesh = "primitives/cylinder"

[entities.transform]
position = [18, 2.5, -18]
scale = [2, 5, 2]

[entities.material]
albedo = [0.22, 0.22, 0.28]
metallic = 0.7
roughness = 0.25

[entities.physics]
body_type = "static"
layer = "terrain"

[entities.physics.collider]
shape = "cylinder"
radius = 2
height = 5

[[entities]]
name = "cover_pillar_2"
mesh = "primitives/cylinder"

[entities.transform]
position = [-18, 2.5, 18]
scale = [2, 5, 2]

[entities.material]
albedo = [0.22, 0.22, 0.28]
metallic = 0.7
roughness = 0.25

[entities.physics]
body_type = "static"
layer = "terrain"

[entities.physics.collider]
shape = "cylinder"
radius = 2
height = 5

# --- CENTRAL PLATFORM (for power-up) ---
[[entities]]
name = "power_platform"
mesh = "primitives/cylinder"

[entities.transform]
position = [0, 0.15, 0]
scale = [4, 0.3, 4]

[entities.material]
albedo = [0.1, 0.1, 0.12]
emissive = [0.4, 0.3, 0.05]
metallic = 0.9
roughness = 0.1

[entities.physics]
body_type = "static"
layer = "terrain"

[entities.physics.collider]
shape = "cylinder"
radius = 4
height = 0.3

# ============================================================================
# ENTITIES - PLAYER
# ============================================================================

[[entities]]
name = "player"
mesh = "characters/fps_arms.glb"

[entities.transform]
position = [0, 1, -25]
rotation = [0, 0, 0]

# --- C++ Controller ---
[entities.cpp_class]
library = "game_logic.dll"
class = "FPSPlayerController"
hot_reload = true

[entities.cpp_class.properties]
move_speed = 7.0
sprint_speed = 11.0
jump_force = 8.5
look_sensitivity = 2.0
camera_height = 1.7
air_control = 0.3

# --- Health ---
[entities.health]
max_health = 100
current_health = 100
regeneration = 0.0
invulnerability_time = 0.2

[entities.health.feedback]
hit_flash_color = [1, 0.2, 0.2, 0.4]
hit_flash_duration = 0.15
low_health_threshold = 25
low_health_effect = "effects/low_health_vignette.toml"

[entities.health.events]
on_damage = "OnPlayerDamage"
on_death = "OnPlayerDeath"

# --- Character Controller ---
[entities.character_controller]
enabled = true
height = 1.8
radius = 0.4
step_height = 0.35
slope_limit = 50

[entities.character_controller.ground_check]
distance = 0.15
layer_mask = ["terrain", "default"]

[entities.physics]
layer = "player"

# --- Weapon ---
[entities.weapon]
equipped = "plasma_rifle"
socket = "weapon_socket"

[entities.weapon.state]
current_ammo = 30
reserve_ammo = 150

[entities.weapon.input]
fire = "attack"
aim = "aim"
reload = "reload"

# --- Inventory ---
[entities.inventory]
slots = 10
equipment_slots = ["primary", "secondary"]

# --- Audio ---
[entities.audio.sounds]
footstep_concrete = { clips = ["sounds/footsteps/concrete_01.wav", "sounds/footsteps/concrete_02.wav", "sounds/footsteps/concrete_03.wav"], volume = 0.5, pitch_min = 0.95, pitch_max = 1.05 }
jump = "sounds/player/jump.wav"
land = "sounds/player/land.wav"
hurt = { clips = ["sounds/player/hurt_01.wav", "sounds/player/hurt_02.wav"], volume = 0.8 }

# --- Blueprint for power-up handling ---
[entities.blueprint]
graph = "blueprints/BP_PlayerPowerUp.bp"

[entities.blueprint.variables]
is_powered_up = { type = "bool", default = false }
power_surge_time = { type = "float", default = 0.0 }
base_weapon_id = { type = "string", default = "plasma_rifle" }
powered_weapon_id = { type = "string", default = "plasma_rifle_powered" }

[entities.blueprint.events]
on_tick = "UpdatePowerUp"
on_power_up_start = "OnPowerUpStart"
on_power_up_end = "OnPowerUpEnd"

# ============================================================================
# ENTITIES - POWER CORE PICKUP
# ============================================================================

[[entities]]
name = "power_core"
mesh = "pickups/power_core.glb"

[entities.transform]
position = [0, 1.5, 0]
scale = 0.7

[entities.material]
albedo = [1, 0.85, 0.3]
emissive = [3, 2.2, 0.5]
metallic = 0.95
roughness = 0.05

# Floating animation
[entities.animation]
type = "oscillate"
axis = [0, 1, 0]
distance = 0.25
speed = 1.8

# Also rotating
[[entities.animations]]
type = "rotate"
axis = [0, 1, 0]
speed = 60

# Pickup configuration
[entities.pickup]
item_id = "power_surge_core"
quantity = 1
auto_collect = true
collect_radius = 2.0
respawn = true
respawn_time = 25.0

[entities.pickup.events]
on_collect = "OnPowerCoreCollected"

[entities.pickup.feedback]
glow_color = [1, 0.85, 0.3, 1]
collect_effect = "effects/power_core_burst.toml"
collect_sound = "sounds/powerups/core_collect.wav"

# Custom state
[entities.state]
is_available = true

# --- Power Core Light ---
[[entities]]
name = "power_core_light"
parent = "power_core"

[entities.light]
type = "point"
color = [1, 0.8, 0.3]
intensity = 800
range = 12
shadows = false

# --- Power Core Particles ---
[[entities]]
name = "power_core_particles"
parent = "power_core"

[entities.particles]
preset = "energy_orb"
color_start = [1, 0.9, 0.4, 1]
color_end = [1, 0.5, 0, 0]
emit_rate = 30
lifetime = 1.2
size_start = 0.12
size_end = 0.02
velocity = [0, 0.8, 0]
spread = 0.5

# ============================================================================
# ENTITIES - TARGET DUMMIES
# ============================================================================

[[entities]]
name = "target_01"
mesh = "enemies/target_dummy.glb"

[entities.transform]
position = [20, 0, 20]
rotation = [0, -135, 0]

[entities.material]
albedo = [0.75, 0.15, 0.15]
metallic = 0.3
roughness = 0.6

[entities.health]
max_health = 100
invulnerability_time = 0.05

[entities.health.events]
on_damage = "OnTargetDamage"
on_death = "OnTargetDestroyed"

[entities.health.feedback]
show_damage_numbers = true
hit_flash_color = [1, 1, 1, 0.7]
hit_flash_duration = 0.08

[entities.physics]
body_type = "static"
layer = "enemies"

[entities.physics.collider]
shape = "capsule"
radius = 0.5
height = 2.0
offset = [0, 1, 0]

[entities.state]
points_value = 100
respawn_delay = 5.0

[entities.audio.sounds]
hit = { clips = ["sounds/impacts/metal_01.wav", "sounds/impacts/metal_02.wav"], volume = 0.6 }
destroy = "sounds/impacts/target_destroy.wav"

[[entities]]
name = "target_02"
mesh = "enemies/target_dummy.glb"

[entities.transform]
position = [-20, 0, 20]
rotation = [0, 135, 0]

[entities.material]
albedo = [0.75, 0.15, 0.15]
metallic = 0.3
roughness = 0.6

[entities.health]
max_health = 100

[entities.health.events]
on_damage = "OnTargetDamage"
on_death = "OnTargetDestroyed"

[entities.health.feedback]
show_damage_numbers = true
hit_flash_color = [1, 1, 1, 0.7]
hit_flash_duration = 0.08

[entities.physics]
body_type = "static"
layer = "enemies"

[entities.physics.collider]
shape = "capsule"
radius = 0.5
height = 2.0
offset = [0, 1, 0]

[entities.state]
points_value = 100
respawn_delay = 5.0

[entities.audio.sounds]
hit = { clips = ["sounds/impacts/metal_01.wav", "sounds/impacts/metal_02.wav"], volume = 0.6 }
destroy = "sounds/impacts/target_destroy.wav"

[[entities]]
name = "target_03"
mesh = "enemies/target_dummy.glb"

[entities.transform]
position = [25, 0, 0]
rotation = [0, -90, 0]

[entities.material]
albedo = [0.75, 0.15, 0.15]
metallic = 0.3
roughness = 0.6

[entities.health]
max_health = 150  # Tougher

[entities.health.events]
on_damage = "OnTargetDamage"
on_death = "OnTargetDestroyed"

[entities.health.feedback]
show_damage_numbers = true

[entities.physics]
body_type = "static"
layer = "enemies"

[entities.physics.collider]
shape = "capsule"
radius = 0.5
height = 2.0
offset = [0, 1, 0]

[entities.state]
points_value = 150
respawn_delay = 6.0

[entities.audio.sounds]
hit = { clips = ["sounds/impacts/metal_01.wav", "sounds/impacts/metal_02.wav"], volume = 0.6 }
destroy = "sounds/impacts/target_destroy.wav"

[[entities]]
name = "target_04"
mesh = "enemies/target_dummy.glb"

[entities.transform]
position = [-25, 0, 0]
rotation = [0, 90, 0]

[entities.material]
albedo = [0.75, 0.15, 0.15]
metallic = 0.3
roughness = 0.6

[entities.health]
max_health = 150

[entities.health.events]
on_damage = "OnTargetDamage"
on_death = "OnTargetDestroyed"

[entities.health.feedback]
show_damage_numbers = true

[entities.physics]
body_type = "static"
layer = "enemies"

[entities.physics.collider]
shape = "capsule"
radius = 0.5
height = 2.0
offset = [0, 1, 0]

[entities.state]
points_value = 150
respawn_delay = 6.0

[entities.audio.sounds]
hit = { clips = ["sounds/impacts/metal_01.wav", "sounds/impacts/metal_02.wav"], volume = 0.6 }
destroy = "sounds/impacts/target_destroy.wav"

[[entities]]
name = "target_boss"
mesh = "enemies/target_dummy_large.glb"

[entities.transform]
position = [0, 0, 25]
rotation = [0, 180, 0]
scale = 1.5

[entities.material]
albedo = [0.9, 0.2, 0.1]
emissive = [0.3, 0.05, 0]
metallic = 0.5
roughness = 0.4

[entities.health]
max_health = 300  # Boss target!

[entities.health.events]
on_damage = "OnTargetDamage"
on_death = "OnBossTargetDestroyed"

[entities.health.feedback]
show_damage_numbers = true
hit_flash_color = [1, 1, 0.5, 0.8]
hit_flash_duration = 0.1

[entities.physics]
body_type = "static"
layer = "enemies"

[entities.physics.collider]
shape = "capsule"
radius = 0.75
height = 3.0
offset = [0, 1.5, 0]

[entities.state]
points_value = 500
respawn_delay = 15.0
is_boss = true

[entities.audio.sounds]
hit = { clips = ["sounds/impacts/metal_heavy_01.wav", "sounds/impacts/metal_heavy_02.wav"], volume = 0.8 }
destroy = "sounds/impacts/boss_destroy.wav"

# ============================================================================
# ENTITIES - AMMO PICKUPS
# ============================================================================

[[entities]]
name = "ammo_pickup_1"
mesh = "pickups/ammo_cell.glb"

[entities.transform]
position = [15, 0.6, -15]
scale = 0.5

[entities.material]
albedo = [0.3, 0.6, 1]
emissive = [0.15, 0.35, 0.6]
metallic = 0.8
roughness = 0.2

[entities.animation]
type = "oscillate"
axis = [0, 1, 0]
distance = 0.12
speed = 2.2

[entities.pickup]
item_id = "plasma_ammo"
quantity = 30
auto_collect = true
collect_radius = 1.5
respawn = true
respawn_time = 12.0

[entities.pickup.feedback]
glow_color = [0.3, 0.6, 1, 1]
collect_sound = "sounds/pickups/ammo.wav"

[[entities]]
name = "ammo_pickup_2"
mesh = "pickups/ammo_cell.glb"

[entities.transform]
position = [-15, 0.6, 15]
scale = 0.5

[entities.material]
albedo = [0.3, 0.6, 1]
emissive = [0.15, 0.35, 0.6]
metallic = 0.8
roughness = 0.2

[entities.animation]
type = "oscillate"
axis = [0, 1, 0]
distance = 0.12
speed = 2.2

[entities.pickup]
item_id = "plasma_ammo"
quantity = 30
auto_collect = true
collect_radius = 1.5
respawn = true
respawn_time = 12.0

[entities.pickup.feedback]
glow_color = [0.3, 0.6, 1, 1]
collect_sound = "sounds/pickups/ammo.wav"

# ============================================================================
# ENTITIES - HEALTH PICKUP
# ============================================================================

[[entities]]
name = "health_pickup_1"
mesh = "pickups/health_pack.glb"

[entities.transform]
position = [22, 0.5, -22]
scale = 0.45

[entities.material]
albedo = [0.2, 0.85, 0.35]
emissive = [0.05, 0.25, 0.08]
metallic = 0.4
roughness = 0.35

[entities.animation]
type = "oscillate"
axis = [0, 1, 0]
distance = 0.1
speed = 1.8

[entities.pickup]
item_id = "health_small"
quantity = 1
auto_collect = true
collect_radius = 1.5
respawn = true
respawn_time = 20.0

[entities.pickup.feedback]
glow_color = [0.2, 0.9, 0.35, 1]
collect_effect = "effects/health_restore.toml"
collect_sound = "sounds/pickups/health.wav"

# ============================================================================
# LIGHTING
# ============================================================================

[[entities]]
name = "sun_light"

[entities.transform]
rotation = [-55, 30, 0]

[entities.light]
type = "directional"
color = [0.85, 0.9, 1.0]
intensity = 0.6
shadows = true

[entities.light.shadows]
resolution = 2048
bias = 0.0005
normal_bias = 0.02

[[entities]]
name = "ambient_light"

[entities.light]
type = "ambient"
color = [0.25, 0.28, 0.4]
intensity = 0.35

# Corner accent lights
[[entities]]
name = "accent_light_ne"

[entities.transform]
position = [28, 6, 28]

[entities.light]
type = "point"
color = [0.3, 0.5, 1]
intensity = 400
range = 18

[[entities]]
name = "accent_light_nw"

[entities.transform]
position = [-28, 6, 28]

[entities.light]
type = "point"
color = [1, 0.4, 0.3]
intensity = 400
range = 18

[[entities]]
name = "accent_light_se"

[entities.transform]
position = [28, 6, -28]

[entities.light]
type = "point"
color = [0.3, 1, 0.5]
intensity = 400
range = 18

[[entities]]
name = "accent_light_sw"

[entities.transform]
position = [-28, 6, -28]

[entities.light]
type = "point"
color = [1, 0.8, 0.3]
intensity = 400
range = 18

# ============================================================================
# CAMERAS
# ============================================================================

[[cameras]]
name = "player_camera"
fov = 90
near = 0.05
far = 500
default = true
attached_to = "player"

[cameras.offset]
position = [0, 1.7, 0]

[cameras.effects]
motion_blur = false
bloom = true
bloom_intensity = 0.15
vignette = true
vignette_intensity = 0.2

# ============================================================================
# ENVIRONMENT
# ============================================================================

[environment]
[environment.skybox]
type = "procedural"
top_color = [0.02, 0.02, 0.05]
horizon_color = [0.08, 0.06, 0.12]
bottom_color = [0.01, 0.01, 0.02]
intensity = 0.2

[environment.fog]
enabled = true
color = [0.05, 0.05, 0.08]
density = 0.008
start = 40
end = 100

# ============================================================================
# TRIGGERS
# ============================================================================

# Power core area trigger (visual feedback)
[[triggers]]
name = "power_core_area"
shape = "cylinder"
radius = 3.5
height = 4
position = [0, 2, 0]
layer_mask = ["player"]
on_enter = "OnEnterPowerCoreArea"
on_exit = "OnExitPowerCoreArea"

[triggers.data]
hint_text = "Power Core - Walk through to collect"

[triggers.debug]
visible = true
color = [1, 0.8, 0.2, 0.15]

# ============================================================================
# END OF SCENE
# ============================================================================
